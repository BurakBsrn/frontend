{"ast":null,"code":"import _classCallCheck from\"/home/burak/projects/chat/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/burak/projects/chat/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import firebase from'firebase/app';// Add the Firebase products that you want to use\nimport\"firebase/auth\";import\"firebase/firestore\";var FirebaseAuthBackend=/*#__PURE__*/function(){function FirebaseAuthBackend(firebaseConfig){var _this=this;_classCallCheck(this,FirebaseAuthBackend);this.registerUser=function(email,password){return new Promise(function(resolve,reject){firebase.auth().createUserWithEmailAndPassword(email,password).then(function(user){resolve(firebase.auth().currentUser);},function(error){reject(_this._handleError(error));});});};this.loginUser=function(email,password){return new Promise(function(resolve,reject){firebase.auth().signInWithEmailAndPassword(email,password).then(function(user){resolve(firebase.auth().currentUser);},function(error){reject(_this._handleError(error));});});};this.forgetPassword=function(email){return new Promise(function(resolve,reject){firebase.auth().sendPasswordResetEmail(email,{url:window.location.protocol+\"//\"+window.location.host+\"/login\"}).then(function(){resolve(true);}).catch(function(error){reject(_this._handleError(error));});});};this.logout=function(){return new Promise(function(resolve,reject){firebase.auth().signOut().then(function(){resolve(true);}).catch(function(error){reject(_this._handleError(error));});});};this.setLoggeedInUser=function(user){localStorage.setItem(\"authUser\",JSON.stringify(user));};this.getAuthenticatedUser=function(){if(!localStorage.getItem('authUser'))return null;return JSON.parse(localStorage.getItem('authUser'));};if(firebaseConfig){// Initialize Firebase\nfirebase.initializeApp(firebaseConfig);firebase.auth().onAuthStateChanged(function(user){if(user){localStorage.setItem(\"authUser\",JSON.stringify(user));}else{localStorage.removeItem('authUser');}});}}/**\n     * Registers the user with given details\n     */_createClass(FirebaseAuthBackend,[{key:\"_handleError\",/**\n     * Handle the error\n     * @param {*} error \n     */value:function _handleError(error){// var errorCode = error.code;\nvar errorMessage=error.message;return errorMessage;}}]);return FirebaseAuthBackend;}();var _fireBaseBackend=null;/**\n * Initilize the backend\n * @param {*} config \n */var initFirebaseBackend=function initFirebaseBackend(config){if(!_fireBaseBackend){_fireBaseBackend=new FirebaseAuthBackend(config);}return _fireBaseBackend;};/**\n * Returns the firebase backend\n */var getFirebaseBackend=function getFirebaseBackend(){return _fireBaseBackend;};export{initFirebaseBackend,getFirebaseBackend};","map":{"version":3,"sources":["/home/burak/projects/chat/frontend/src/helpers/firebase.js"],"names":["firebase","FirebaseAuthBackend","firebaseConfig","registerUser","email","password","Promise","resolve","reject","auth","createUserWithEmailAndPassword","then","user","currentUser","error","_handleError","loginUser","signInWithEmailAndPassword","forgetPassword","sendPasswordResetEmail","url","window","location","protocol","host","catch","logout","signOut","setLoggeedInUser","localStorage","setItem","JSON","stringify","getAuthenticatedUser","getItem","parse","initializeApp","onAuthStateChanged","removeItem","errorMessage","message","_fireBaseBackend","initFirebaseBackend","config","getFirebaseBackend"],"mappings":"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","sourcesContent":["import firebase from 'firebase/app';\n// Add the Firebase products that you want to use\nimport \"firebase/auth\";\nimport \"firebase/firestore\";\n\nclass FirebaseAuthBackend {\n    constructor(firebaseConfig) {\n        if (firebaseConfig) {\n            // Initialize Firebase\n            firebase.initializeApp(firebaseConfig);\n            firebase.auth().onAuthStateChanged((user) => {\n                if (user) {\n                    localStorage.setItem(\"authUser\", JSON.stringify(user));\n                } else {\n                    localStorage.removeItem('authUser');\n                }\n            });\n        }\n    }\n\n    /**\n     * Registers the user with given details\n     */\n    registerUser = (email, password) => {\n        return new Promise((resolve, reject) => {\n            firebase.auth().createUserWithEmailAndPassword(email, password).then((user) => {\n                resolve(firebase.auth().currentUser);\n            }, (error) => {\n                reject(this._handleError(error));\n            });\n        });\n    }\n\n    /**\n     * Login user with given details\n     */\n    loginUser = (email, password) => {\n        return new Promise((resolve, reject) => {\n            firebase.auth().signInWithEmailAndPassword(email, password).then((user) => {\n                resolve(firebase.auth().currentUser);\n            }, (error) => {\n                reject(this._handleError(error));\n            });\n        });\n    }\n\n    /**\n     * forget Password user with given details\n     */\n    forgetPassword = (email) => {\n        return new Promise((resolve, reject) => {\n            firebase.auth().sendPasswordResetEmail(email, { url: window.location.protocol + \"//\" + window.location.host + \"/login\" }).then(() => {\n                resolve(true);\n            }).catch((error) => {\n                reject(this._handleError(error));\n            })\n        });\n    }\n\n    /**\n     * Logout the user\n     */\n    logout = () => {\n        return new Promise((resolve, reject) => {\n            firebase.auth().signOut().then(() => {\n                resolve(true);\n            }).catch((error) => {\n                reject(this._handleError(error));\n            })\n        });\n    }\n\n    setLoggeedInUser = (user) => {\n        localStorage.setItem(\"authUser\", JSON.stringify(user));\n    }\n\n    /**\n     * Returns the authenticated user\n     */\n    getAuthenticatedUser = () => {\n        if (!localStorage.getItem('authUser'))\n            return null;\n        return JSON.parse(localStorage.getItem('authUser'));\n    }\n\n    /**\n     * Handle the error\n     * @param {*} error \n     */\n    _handleError(error) {\n        // var errorCode = error.code;\n        var errorMessage = error.message;\n        return errorMessage;\n    }\n}\n\n\nlet _fireBaseBackend = null;\n\n/**\n * Initilize the backend\n * @param {*} config \n */\nconst initFirebaseBackend = (config) => {\n    if (!_fireBaseBackend) {\n        _fireBaseBackend = new FirebaseAuthBackend(config);\n    }\n    return _fireBaseBackend;\n}\n\n/**\n * Returns the firebase backend\n */\nconst getFirebaseBackend = () => {\n    return _fireBaseBackend;\n}\n\nexport { initFirebaseBackend, getFirebaseBackend };"]},"metadata":{},"sourceType":"module"}